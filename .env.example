# Valdrics Environment Configuration
# Copy this file to .env and fill in your values

# App Configuration
DEBUG=False
APP_NAME="Valdrics"
ENVIRONMENT=development
# In staging/production, core circuit breaker state is process-local, so keep one worker.
WEB_CONCURRENCY=1
# Reverse-proxy hop depth for X-Forwarded-For parsing (1-5)
TRUSTED_PROXY_HOPS=1

# CSRF (required)
# Generate: python -c "import secrets; print(secrets.token_hex(32))"
CSRF_SECRET_KEY=

# Strict SaaS integration mode
# Set true in production SaaS to force tenant-scoped integrations.
# In strict mode, keep env routing vars (SLACK_CHANNEL_ID/JIRA_*/workflow vars) empty.
SAAS_STRICT_INTEGRATIONS=false

# AWS Credentials (optional - Valdrics uses STS AssumeRole primarily)
AWS_DEFAULT_REGION=us-east-1

# LLM Provider (options: openai, claude, google, groq)
LLM_PROVIDER=groq
# Forecasting policy:
# false -> staging/production require Prophet (recommended default)
# true  -> temporary break-glass fallback to Holt-Winters when Prophet is unavailable
FORECASTER_ALLOW_HOLT_WINTERS_FALLBACK=false
# Required when FORECASTER_ALLOW_HOLT_WINTERS_FALLBACK=true in staging/production
FORECASTER_BREAK_GLASS_REASON=
# ISO-8601 UTC timestamp, e.g. 2026-02-22T10:00:00Z
FORECASTER_BREAK_GLASS_EXPIRES_AT=

# LLM API Keys (provide at least one)
OPENAI_API_KEY=
CLAUDE_API_KEY=
GOOGLE_API_KEY=
GROQ_API_KEY=

# Scheduler Configuration
SCHEDULER_HOUR=8
SCHEDULER_MINUTE=0

# Redis (required for distributed rate limiting / cache in prod)
REDIS_URL=redis://localhost:6379

# Error tracking (optional)
# If set in staging/production, sentry-sdk must be installed in the runtime image.
SENTRY_DSN=

# Database (Neon PostgreSQL)
# NOTE: Async SQLAlchemy needs 'postgresql+asyncpg://' scheme
DATABASE_URL=postgresql+asyncpg://user:password@host/database
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30
# Set true only when using an external DB pooler and intentionally bypassing app-level pooling.
DB_USE_NULL_POOL=false
DB_EXTERNAL_POOLER=false

# Supabase Auth
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_JWT_SECRET=your-supabase-jwt-secret

# Slack Integration (optional)
# Shared bot token can be set by operator; tenant channel is configured in-app.
SLACK_BOT_TOKEN=
# Leave empty for strict SaaS mode (tenant sets channel override in UI)
SLACK_CHANNEL_ID=

# Paystack Billing
PAYSTACK_SECRET_KEY=
PAYSTACK_PUBLIC_KEY=

# Encryption (generate with: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())")
ENCRYPTION_KEY=
# KDF salt for deriving encryption keys (required, must decode to 32 bytes)
# Generate: python -c "import secrets,base64; print(base64.b64encode(secrets.token_bytes(32)).decode())"
KDF_SALT=

# SMTP Email (optional - for carbon alerts)
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=

# Admin API Key (for /admin endpoints)
ADMIN_API_KEY=
